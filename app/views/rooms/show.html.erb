<div class="panel panel-default docprofile">
  <div class="panel-defaultpanel-body">

    <div class="row">
        <div class="col-md-12">
            
            <div class="col-md-8 nopadding">
                <div class="col-md-3">
                <div class="image-cropper">
                  <%= image_tag @photos[0].image.url(), class: 'img-responsive rounded' if @photos.length > 0 %>
                  </div>
                </div>
                
                <div class="col-md-9">
                  <h3><%= @room.listing_name %>, <%= @room.degree %></h3>
                  <h6><%= @room.category %></h6>
                  <h5>Practice: <%= @room.practice %></h5>
                  <h4>Reviews <span id="average_rating"></span>  (<%= @reviews.count %>)</h4>
                </div>
            </div>
  
            <div class="col-md-4 nopadding">
               
                 <a href="" class="btn btn-block btn-primary">Book An Appointment</a>   

            </div>

        </div>
    </div>

  </div>
</div>

<div class="panel panel-default">
  <div class=" panel panel-defaultpanel-body">

   

    <!-- About -->
    <div class="row">
      <div class="col-md-8">
        <h3>Biography</h3>
        <p><%= @room.biography %></p>
        <h3>Educations</h3>
        <p>LIST OF EDUCATION SCHOOL, YEAR</p>
        <h3>Conditions</h3>
        <p>LIST OF CONDITIONS</p>
        <h3>Insurances</h3>
        <p>LIST OF INSURANCES</p>
        <h3>Procedures</h3>
        <p>LIST OF PROCEDURES</p>
        <h3>Languages</h3>
        <p>LIST OF LANGUAGES</p>
        <h3>Gender</h3>
        <p><%= @room.gender %></p>



                  <h3>Reviews <span id="average_rating"></span>  (<%= @reviews.count %>)</h3>
                  <%= render 'reviews/form' if @booked && !@hasReview %>
                  <%= render 'reviews/list' %>
      
      </div>
      <div class="col-md-4 nopadding">

    <!-- Google Maps -->
    <div class="row">
      <div class="col-md-12 nopadding">
       <p><i class="fa fa-map-marker" aria-hidden="true"></i> <%= @room.full_street_address %></p>
        <div id="map"></div>
        <style>
          #map {
            width: 100%;
            height: 400px;
          }
        </style>
        <script>
          function initMap() {
            var mapDiv = document.getElementById('map');
            var map = new google.maps.Map(mapDiv, {
              center: {lat: <%= @room.latitude %>, lng: <%= @room.longitude %>},
              zoom: 15
            });
            var marker = new google.maps.Marker({
              position: {lat: <%= @room.latitude %>, lng: <%= @room.longitude %>},
              title: "<%= @room.listing_name %>"
            });
            var contentString = '<div id="content">'+
            '<div id="siteNotice">'+
            '</div>'+
            '<div class="row">' +
                '<div class="">' +
                  '<div id="myCarousel" class="carousel slide" data-ride="carousel">' +
                    '<% if @photos %>' +
                      '<ol class="carousel-indicators">' +
                        '<% @photos.each do |photo| %>' +
                          '<li data-target="#myCarousel" data-slide-to="<%= photo.id %>"></li>' +
                        '<% end %>' +
                      '</ol>' +
                    '<% end %>' +

                    '<div class="carousel-inner" role="listbox">' +
                      '<% if @photos %>' +
                        '<% @photos.each do |photo| %>' +
                          '<div class="item <%='active' if photo.id == @photos[0].id %>">' +
                            '<img src="<%= photo.image.url()%>" alt="Mountain View" style="width:190px;height:150px;">' +
                          '</div>' +
                        '<% end %>' +
                      '<% end %>' +
                    '</div>' +


                    '<a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">' +
                      '<span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>' +
                      '<span class="sr-only">Previous</span>'+
                    '</a>'+
                    '<a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">'+
                      '<span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>' +
                      '<span class="sr-only">Next</span>' +
                    '</a>' +
                  '</div>' +
                '</div>' +
              '</div>' +
            '<h3 id="firstHeading" class="firstHeading"><%= @room.listing_name %></h3>'+
            '<h4 id="firstHeading" class="firstHeading"><%= @room.category %></h4>'+
            '<div id="bodyContent">'+
            '</div>';
            marker.setMap(map);
            marker.addListener('click', function() {
                infowindow.open(map, marker);
             });
            var infowindow = new google.maps.InfoWindow({
              content: contentString
            });
          }
        </script>
        <!-- <script src="https://maps.googleapis.com/maps/api/js?callback=initMap"
            async defer></script> -->
        <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANqUD_Cbr7IantIEZIEIHNYEZ9gRMemdw&callback=initMap"
      type="text/javascript"></script>

      </div>
    </div>
</div>
    </div>



    <!-- Carousel -->
    <div class="row">
      <div class="col-md-10 col-md-offset-1">
        <div id="myCarousel" class="carousel slide" data-ride="carousel">
          <!-- Indicators -->
          <% if @photos %>
            <ol class="carousel-indicators">
              <% @photos.each do |photo| %>
                <li data-target="#myCarousel" data-slide-to="<%= photo.id %>"></li>
              <% end %>
            </ol>
          <% end %>

          <!-- Wrapper for slides -->
          <div class="carousel-inner" role="listbox">
            <% if @photos %>
              <% @photos.each do |photo| %>
                <div class="item <%='active' if photo.id == @photos[0].id %>">
                  <%= image_tag photo.image.url() %>
                </div>
              <% end %>
            <% end %>
          </div>

          <!-- Left and right controls -->
          <a class="left carousel-control" href="#myCarousel" role="button" data-slide="prev">
            <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="right carousel-control" href="#myCarousel" role="button" data-slide="next">
            <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>
    </div>

    <br>
    <hr>

   

    <br>
    <hr>

    <br>
    <hr>
    
    <!-- Near by Rooms -->
    <h3>Near By</h3>
    <div class="row">
      <% for room in @room.nearbys(10) %>
        <div class="col-md-4">
          <div class="panel panel-default">
            <div class="panel-heading preview">
              <%= image_tag room.photos[0].image.url(:medium) %>
            </div>
            <div class="panel-body">
              <%= link_to room.listing_name, room %><br>
              (<%= room.distance.round(2) %> miles away)
            </div>
          </div>
        </div>
      <% end %>
    </div>

  </div>
</div>

<script>
  $('#average_rating').raty ({
    readOnly: true,
    score: <%= @room.average_rating %>
  });
</script>