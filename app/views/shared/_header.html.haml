%nav.navbar.navbar-default
  .container-fluid
    .navbar-header
      %button.navbar-toggle{"aria-controls" => "navbar", "aria-expanded" => "true", "data-target" => "#navbar", "data-toggle" => "collapse", :type => "button"}
        %span.sr-only Toggle navigation
        %span.icon-bar
        %span.icon-bar
        %span.icon-bar
      %a.navbar-brand{:href => "/"}
        %img{:src => "/assets/home/gotdoc-logo.png"} 

    #navbar.navbar-collapse.collapse.in{"aria-expanded" => "true"}
      %ul.nav.navbar-nav
        %li.header-navbar
          .search.visible-md.visible-lg.ng-scope{"data-ng-controller" => "uiSearchController"}
            = form_tag search_path, method: :get do
              .input-group
                %span.button{"ng-click" => "toggleDropDown()"}
                = text_field_tag :location, params[:location], placeholder: 'City, Zip Code or State' 
        %li.dropdown
          %a.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
            Browse
            %span.caret
          %ul.dropdown-menu
            %li
              %a{:href => "javascript:void(0)"} Categories
            %li
              %a{:href => "javascript:void(0)"} Procedures
            %li
              %a{:href => "javascript:void(0)"} Symptoms
            %li
              %a{:href => "javascript:void(0)"} Locations
      %ul.nav.navbar-nav.navbar-right
        - unless user_signed_in?
          %li
            %a{:href => "/room_steps"}
              List your practice 

          %li
            %a{:href => "/sign-up"}
              %span.glyphicon.glyphicon-user
              Sign Up
          %li
            %a{:href => "/sign-in"}
              %span.glyphicon.glyphicon-log-in
              Login

        - else

          %li= link_to icon('envelope'), conversations_path

          %li= link_to icon('question'), "javascript:void(0)"

          %li.nav-icon-btn.nav-icon-btn-danger.dropdown#notifications
            = render "shared/notifications"

          %li.dropdown
            %a.dropdown-toggle{"aria-expanded" => "false", "aria-haspopup" => "true", "data-toggle" => "dropdown", :href => "#", :role => "button"}
              = image_tag avatar_url(current_user), class: 'img-circle avatar-small'
              = current_user.fullname
              %span.caret
            %ul.dropdown-menu
              - if current_user.type == "Doctor"
                %li= link_to 'Dashboard', dashboard_path
                %li= link_to 'My profile', user_path(current_user.id)
                %li= link_to 'Rooms', rooms_path
              - else
                %li= link_to 'My profile', user_path(current_user.id)
                %li= link_to 'Appointments', "/patient/#{current_patient.id}/bookings"
              %li= link_to 'Settings', edit_user_registration_path(personal:true)
              %li= link_to 'Sign out', destroy_user_session_path, method: :delete
    / /.nav-collapse
  / /.container-fluid


- content_for :javascript do
  :javascript

    $('li#notifications').click(function(){
      $.ajax({
        url: '/mark_as_read',
        type: "GET",
        success: function(data) {
        },
        failure: function() {
        }
      }); 

    })